<!-- 
Title: Hotel Reservations System UI
Used In File(s): code_ark\code\modules\hotel\hotel_computers.dm
 -->

{{if data.mode == 0}}
    <H3><span class="bad">An error has occurred!</span></H3>
    <div class="itemContent" style = "width: 300px">The selected room may no longer be usable, the terminal connection might have been lost, or the new reservation has timed out.<br>{{:helper.link( 'Return', 'arrowreturn-1-w', {'return_to_main' : 1}, null, null, null)}}</div>

{{else data.mode == 1}}
    <div class="itemContent">
        <H3><span class="white">Reservation Mode: </span></H3>
        {{:helper.link('Auto' , null, {'auto' : 1}, data.auto_mode == 1 ? 'selected' : null, null)}}
        {{:helper.link('Manual' , null, {'auto' : 0}, data.auto_mode == 0 ? 'selected' : null, null)}}
    </div>
    <H2><span class="white">Single Rooms:</span></H2>
    <div class="itemContent">
        {{for data.single_rooms}}
            <div class="itemGroup" style = "width: 300px">
                <table><tr>
                    <td>
                        {{if value.room.status == 0}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number},'disabled', null)}}
                        {{else}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number}, null, value.room.status == 1 ? 'greenButton' : value.room.status == 2 && value.room.requests < 2 ? null : value.room.requests > 1 ? 'redButton' : 'yellowButton' , null)}}
                        {{/if}}
                    </td><td>
                        <span class="white">Status: </span>
                        {{if value.room.status == 0}}
                            <span class="bad">ERROR</span>
                        {{else value.room.status == 1}}
                            <span class="good">available</span>
                        {{else value.room.status == 2}}
                            <span class="white">{{if value.room.end}}occupied{{else}}reservation in progress{{/if}}</span>
                        {{if value.room.end}}
                            <span class="white">until {{:value.room.end}}</span>
                        {{/if}}
                        {{else value.room.status == 3}}
                            <span class="average">blocked</span>
                        {{/if}}
                        <br>1 bed - {{:value.room.price}} thalers per hour<br>
                        <span class="white">Remarks:</span>
                        {{if value.room.requests == 0}}
                            none
                        {{else value.room.requests == 1}}
                            <span class="average">do not disturb</span>
                        {{else value.room.requests == 2}}
                            <span class="bad">make up the room</span>
                        {{else value.room.requests == 3}}
                            <span class="bad">room turnover required</span>
                        {{/if}}
                    </td>
                </tr></table>

            </div>
        {{/for}}
    </div>
    <H2><span class="white">Double Rooms:</span></H2>
    <div class="itemContent">
        {{for data.double_rooms}}
            <div class="itemGroup" style = "width: 300px">
                <table><tr>
                    <td>
                        {{if value.room.status == 0}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number},'disabled', null)}}
                        {{else}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number}, null, value.room.status == 1 ? 'greenButton' : value.room.status == 2 && value.room.requests < 2 ? null : value.room.requests > 1 ? 'redButton' : 'yellowButton' , null)}}
                        {{/if}}
                    </td><td>
                        <span class="white">Status: </span>
                        {{if value.room.status == 0}}
                            <span class="bad">ERROR</span>
                        {{else value.room.status == 1}}
                            <span class="good">available</span>
                        {{else value.room.status == 2}}
                            <span class="white">{{if value.room.end}}occupied{{else}}reservation in progress{{/if}}</span>
                        {{if value.room.end}}
                            <span class="white">until {{:value.room.end}}</span>
                        {{/if}}
                        {{else value.room.status == 3}}
                            <span class="average">blocked</span>
                        {{/if}}
                        <br>
                        {{if value.room.beds > 1}}
                            {{:value.room.beds}} beds 
                        {{else}}
                            1 bed
                        {{/if}}
                        - {{:value.room.price}} thalers per hour<br>
                        <span class="white">Remarks:</span>
                        {{if value.room.requests == 0}}
                            none
                        {{else value.room.requests == 1}}
                            <span class="average">do not disturb</span>
                        {{else value.room.requests == 2}}
                            <span class="bad">make up the room</span>
                        {{else value.room.requests == 3}}
                            <span class="bad">room turnover required</span>
                        {{/if}}
                    </td>
                </tr></table>

            </div>
        {{/for}}
    </div>
    <H2><span class="white">Special Rooms:</span></H2>
    <span class="white">Note:</span> <i>only manual reservation is available</i>
    <div class="itemContent">
        {{for data.special_rooms}}
            <div class="itemGroup" style = "width: 300px">
                <table><tr>
                    <td>
                        {{if value.room.status == 0}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number},'disabled', null)}}
                        {{else}}
                            {{:helper.link( value.room.number, null, {'room_select' : value.room.number}, null, value.room.status == 1 ? 'greenButton' : value.room.status == 2 && value.room.requests < 2 ? null : value.room.requests > 1 ? 'redButton' : 'yellowButton' , null)}}
                        {{/if}}
                    </td><td>
                        <span class="white">Status: </span>
                        {{if value.room.status == 0}}
                            <span class="bad">ERROR</span>
                        {{else value.room.status == 1}}
                            <span class="good">available</span>
                        {{else value.room.status == 2}}
                            <span class="white">{{if value.room.end}}occupied{{else}}reservation in progress{{/if}}</span>
                            {{if value.room.end}}
                                <span class="white">until {{:value.room.end}}</span>
                            {{/if}}
                        {{else value.room.status == 3}}
                            <span class="average">blocked</span>
                        {{/if}}
                        <br>
                        {{if value.room.beds > 1}}
                            {{:value.room.beds}} beds 
                        {{else}}
                            1 bed
                        {{/if}}
                        - {{:value.room.price}} thalers per hour<br>
                        <span class="white">Remarks:</span>
                        {{if value.room.requests == 0}}
                            none
                        {{else value.room.requests == 1}}
                            <span class="average">do not disturb</span>
                        {{else value.room.requests == 2}}
                            <span class="bad">make up the room</span>
                        {{else value.room.requests == 3}}
                            <span class="bad">room turnover required</span>
                        {{/if}}
                    </td>
                </tr></table>
            </div>
        {{/for}}
    </div>

{{else data.mode == 2}}
    <div class="itemContent">
        {{:helper.link( 'Return', 'arrowreturn-1-w', {'return_to_main' : 1}, null, null, null)}}
        {{:helper.link( 'View Room Logs', 'note', {'room_logs' : 1}, null, null, null)}}
    </div>
    <H2><span class="white">Room {{:data.selected_room.number}}</span></H2>
    <H3><span class="white">Room Details:</span></H3>
    <div class="itemGroup">
        <span class="white">Status: </span>
        {{if data.selected_room.status == 0}}
            <span class="bad">ERROR</span>
        {{else data.selected_room.status == 1}}
            <span class="good">available</span>
        {{else data.selected_room.status == 2}}
            <span class="white">{{if data.selected_room.end}}occupied{{else}}reservation in progress{{/if}}</span>
        {{else data.selected_room.status == 3}}
            <span class="average">blocked</span>
        {{/if}} <br>
        <span class="white">Remarks:</span>
        {{if data.selected_room.requests == 0}}
            none
        {{else data.selected_room.requests == 1}}
            <span class="average">do not disturb</span>
        {{else data.selected_room.requests == 2}}
            <span class="bad">make up the room</span>
        {{else data.selected_room.requests == 3}}
            <span class="bad">room turnover required</span>
        {{/if}} <br>
        <span class="white">Number of beds: </span> {{:data.selected_room.beds}} <br>
        <span class="white">Guest capacity: </span> {{:data.selected_room.capacity}} <br>
        <span class="white">Hourly price: </span> {{:data.selected_room.price}} thalers
    </div>
        {{if data.selected_room.status == 1}}
            {{:helper.link( 'Reserve', 'calendar', {'room_reserve' : 1}, null, 'greenButton' , null)}}
        {{else}}
            {{:helper.link( 'Reserve', 'calendar', {'room_reserve' : 1}, 'disabled' , null)}}
        {{/if}}
        {{if data.selected_room.status == 0 || data.selected_room.status == 2 || data.selected_room.requests == 3}}
            {{:helper.link( data.selected_room.status == 3 ? 'Unblock' : 'Block', 'cancel', data.selected_room.status == 3 ? {'room_unblock' : 1} : {'room_block' : 1} , 'disabled', null)}}
        {{else}}
            {{:helper.link( data.selected_room.status == 3 ? 'Unblock' : 'Block', 'cancel', data.selected_room.status == 3 ? {'room_unblock' : 1} : {'room_block' : 1} , null, data.selected_room.status == 3 ? 'yellowButton' : null , null)}}
        {{/if}}
        {{if data.selected_room.requests > 1}}
            {{:helper.link( 'Reset', 'refresh', {'room_reset' : 1}, null, 'yellowButton', null)}}
        {{else}}
            {{:helper.link( 'Reset', 'refresh', {'room_reset' : 1}, 'disabled', null)}}
        {{/if}}
        {{if data.selected_room.status == 2 && data.selected_room.end}}
            {{:helper.link( 'Cancel Reservation', 'closethick', {'room_cancel' : 1}, null, 'redButton', null)}}
        {{else}}
            {{:helper.link( 'Cancel Reservation', 'closethick', {'room_cancel' : 1}, 'disabled' , null)}}
        {{/if}}
    <H3><span class="white">Reservation Details:</span></H3>
    {{if data.selected_room.special}}<span class="white">Note:</span><i> this room is available for manual reservation only</i>{{/if}}
    <div class="itemGroup">
        {{if data.selected_room.status == 2}}
            <span class="white">Starting Time: </span> {{:data.selected_room.start}} <br>
            <span class="white">End Time: </span> {{:data.selected_room.end}} <br>
            <span class="white">Guest List: </span> {{:data.selected_room.guests}}
        {{else}}
            <span class="white">No active reservation has been filed for the room</span>
        {{/if}}
    </div>

{{else data.mode == 3}}
    <div class="itemContent">
        {{:helper.link( 'Return', 'arrowreturn-1-w', {'return_to_room' : 1}, null, null, null)}}
        {{:helper.link( 'Print', 'print', {'print_logs' : 1}, null, null, null)}}
    </div>
    <H2><span class="white">Room {{:data.selected_room.number}} Logs:</span></H2>
    <div class="statusDisplay" style="overflow: auto;">
        <div class="item">
            <div class="itemContent" style="width: 100%;">
                {{for data.selected_room.room_logs}}
                    {{:value}}<br>
                {{/for}}
            </div>
        </div>
    </div>

{{else data.mode == 4}}
    <div class="itemContent">
        {{:helper.link( 'Return', 'arrowreturn-1-w', {'return_to_room' : 1}, null, null, null)}}
        {{:helper.link( 'Print', 'print', {'print_reservation' : 1}, data.selected_room.end ? null : 'disabled', null)}}
    </div>
    <H2><span class="white">New Reservation - Room {{:data.selected_room.number}}</span></H2>
    <H3>
        {{if data.selected_room.end }}
            <span class="good">Payment successful. Reservation complete</span>
        {{else data.selected_room.start}}
            <span class="normal">Pending payment</span>
        {{else}}
            <span class="white">Scan guest ID in the terminal</span>
        {{/if}}
    </H3>
    <div class="statusDisplay" style="overflow: auto;">
        <table>
            <tr>
                <td>Room: </td>
                <td>{{:data.selected_room.number}}</td>
            </tr><tr>
                <td>Guests: </td>
                <td>{{for data.selected_room.guests_as_list}}
                        <div class="itemContent">{{:value}} {{:helper.link( '', 'close', {'remove_guest' : value}, null, null)}}</div>
                    {{/for}}</td>
            </tr><tr>
                <td></td>
            </tr>
        </table>
    </div>


<!---
<H3><span class="white">Volume:</span></H3>
{{:helper.displayBar(data.volume*2, 0, 100, 'average')}}
<div class="itemContent">
    {{:helper.link('0' , null, {'volume' : 0}, data.volume == 0 ? 'disabled' : null, null)}}
    {{:helper.link('20' , null, {'volume' : 10}, data.volume == 10 ? 'disabled' : null, null)}}
    {{:helper.link('40' , null, {'volume' : 20}, data.volume == 20 ? 'disabled' : null, null)}}
    {{:helper.link('60' , null, {'volume' : 30}, data.volume == 30 ? 'disabled' : null, null)}}
    {{:helper.link('80' , null, {'volume' : 40}, data.volume == 40 ? 'disabled' : null, null)}}
    {{:helper.link('100' , null, {'volume' : 50}, data.volume == 50 ? 'disabled' : null, null)}}
</div>

<H3><span class="white">Available tracks:</span></H3>
<div class="itemContent">
    {{for data.tracks}}
        <div class="item">
            {{:helper.link( value.track, 'gear', {'title' : value.track}, value.track == data.current_track ? 'disabled' : null, null)}}    
        </div>
    {{/for}}
</div>
--->